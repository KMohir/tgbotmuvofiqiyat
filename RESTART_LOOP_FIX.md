# üîÑ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ó–ê–¶–ò–ö–õ–ò–í–ê–ù–ò–Ø –ë–û–¢–ê

## üîç –ü–†–û–ë–õ–ï–ú–ê

**–°–∏–º–ø—Ç–æ–º—ã:**
- ‚úÖ –ê–≤—Ç–æ–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–µ–∑–æ–Ω–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç (—Å —Å–µ–∑–æ–Ω–∞ 15 –Ω–∞ —Å–µ–∑–æ–Ω 10)
- ‚ùå –ë–æ—Ç **–ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è**
- ‚ùå –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç **–æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ (22:13, 22:14, 22:15)
- ‚ùå –ó–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏–µ –≤ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–µ

## üîß –ù–ê–ô–î–ï–ù–ù–´–ï –ü–†–ò–ß–ò–ù–´

### 1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π –≤ –Ω–æ–≤–æ–º —Å–µ–∑–æ–Ω–µ**
–í –ª–æ–≥–∏–∫–µ –∞–≤—Ç–æ–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å —Å—Ç–∞—Ä–∞—è —Ñ—É–Ω–∫—Ü–∏—è `set_group_video_start()`, –∫–æ—Ç–æ—Ä–∞—è –º–æ–≥–ª–∞ —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å —Å–µ–∑–æ–Ω –æ–±—Ä–∞—Ç–Ω–æ

### 2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞—â–∏—Ç—ã –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏—Å—å –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### 1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π**
```python
# –°–¢–ê–†–´–ô –ö–û–î (–ø—Ä–æ–±–ª–µ–º–Ω—ã–π):
db.set_group_video_start(chat_id, project_for_db, new_season_id, position + 1)

# –ù–û–í–´–ô –ö–û–î (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π):
db.update_group_video_start_only(chat_id, project_for_db, position + 1)
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –û–±–Ω–æ–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ `start_video`
- –ù–ï —Ç—Ä–æ–≥–∞–µ—Ç `season_id` (–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–±—Ä–æ—Å —Å–µ–∑–æ–Ω–∞)
- –ò—Å–∫–ª—é—á–∞–µ—Ç –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏–µ

### 2. **–£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**
```python
# –î–û–ë–ê–í–õ–ï–ù–ê –ó–ê–©–ò–¢–ê –æ—Ç –æ—à–∏–±–æ–∫ –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è—Ö
try:
    await notify_superadmins_season_auto_switched(chat_id, season_id, project)
except Exception as notify_error:
    logger.warning(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: {notify_error}")
    # –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Ä–∞–±–æ—Ç—É –¥–∞–∂–µ –µ—Å–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å
```

### 3. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏**
```
/diagnose_restart_loop
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- –°—Ç–∞—Ç—É—Å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á –ø–æ —Ç–∏–ø–∞–º
- –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
- –ë–ª–∏–∂–∞–π—à–∏–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è

## üß™ –ö–û–ú–ê–ù–î–´ –î–õ–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ò

### 1. **–ì–ª–∞–≤–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è:**
```
/diagnose_restart_loop
```

### 2. **–°—Ç–∞—Ç—É—Å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞:**
```
/scheduler_debug
```

### 3. **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≥—Ä—É–ø–ø—ã:**
```
/diagnose_group -4867322212
```

### 4. **–≠–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```
/fix_all_scheduler_problems
```

### 5. **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞:**
```
/restart_scheduler
```

## üéØ –û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚ùå –ë–æ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
- ‚ùå –û–¥–Ω–∏ –∏ —Ç–µ –∂–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (22:13, 22:14, 22:15...)
- ‚ùå –ó–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏–µ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —Å–µ–∑–æ–Ω–æ–≤
- ‚ùå –ù–µ—Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ **–ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ**
- ‚úÖ **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–µ–∑–æ–Ω–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**
- ‚úÖ **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑**
- ‚úÖ **–ü–µ—Ä–≤–æ–µ –≤–∏–¥–µ–æ –Ω–æ–≤–æ–≥–æ —Å–µ–∑–æ–Ω–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è**
- ‚úÖ **–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è: 1‚Üí2‚Üí3‚Üí4‚Üí5...**

## üöÄ –ü–ï–†–ï–ó–ê–ü–£–°–ö –ò –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### 1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞:**
```bash
docker-compose restart centris-bot
```

### 2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:**
```bash
docker-compose logs -f centris-bot
```

**–û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏:**
```
‚úÖ Postgres is ready!
üêç Starting bot...
‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–ø—É—â–µ–Ω
‚úÖ –ó–∞–¥–∞—á–∏ —Å–æ–∑–¥–∞–Ω—ã –¥–ª—è –≥—Ä—É–ø–ø
```

**–ë–ï–ó –æ—à–∏–±–æ–∫:**
- ‚ùå `bad operand type for abs(): 'str'`
- ‚ùå `cannot access local variable 'bot'`
- ‚ùå –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —Å–µ–∑–æ–Ω–æ–≤

### 3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
```
/diagnose_restart_loop     # –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è
/scheduler_debug           # –°—Ç–∞—Ç—É—Å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
/test_video_sequence -4867322212  # –¢–µ—Å—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```

## üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì

### **–ü—Ä–∏–∑–Ω–∞–∫–∏ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã:**
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —Å–µ–∑–æ–Ω–æ–≤ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è **–æ–¥–∏–Ω —Ä–∞–∑**
- ‚úÖ –í–∏–¥–µ–æ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
- ‚úÖ –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–∏–¥–µ–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –õ–æ–≥–∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –æ—à–∏–±–æ–∫

### **–ü—Ä–∏–∑–Ω–∞–∫–∏ –ø—Ä–æ–±–ª–µ–º:**
- ‚ùå –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
- ‚ùå –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Å–æ–∑–¥–∞–µ—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–¥–∞—á
- ‚ùå –û—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è

## üí° –ü–†–û–§–ò–õ–ê–ö–¢–ò–ö–ê

### **–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:**
```
/diagnose_restart_loop    # –†–∞–∑ –≤ –¥–µ–Ω—å
/scheduler_debug          # –ü—Ä–∏ –ø–æ–¥–æ–∑—Ä–µ–Ω–∏–∏ –Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã
```

### **–ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:**
```
/fix_all_scheduler_problems   # –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
/restart_scheduler           # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
```

## üéâ –†–ï–ó–£–õ–¨–¢–ê–¢

**–ó–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –ê–≤—Ç–æ–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–µ–∑–æ–Ω–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ
- ‚úÖ –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–≤
- ‚úÖ –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–∏–¥–µ–æ –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ó–ê–¶–ò–ö–õ–ò–í–ê–ù–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–û**  
**–í—Ä–µ–º—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** **5 –º–∏–Ω—É—Ç**  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** **–°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –∞–≤—Ç–æ–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Å–µ–∑–æ–Ω–æ–≤**
